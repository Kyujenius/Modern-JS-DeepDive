## 1. 프로퍼티 어트리뷰트

- 자바스크립트 엔진은 프로퍼티 생성 시 **내부적으로 상태 값(메타 프로퍼티)** 을 설정함.
- 내부 슬롯: [[Value]], [[Writable]], [[Enumerable]], [[Configurable]]
- 이 값들은 직접 접근 불가 → Object.getOwnPropertyDescriptor 로 확인.

```js
const person = { name: "Lee" };

console.log(Object.getOwnPropertyDescriptor(person, "name"));
// { value: 'Lee', writable: true, enumerable: true, configurable: true }
```

- Object.getOwnPropertyDescriptors(obj) → 객체 전체의 모든 프로퍼티 어트리뷰트 확인.

## 2. 프로퍼티 종류

프로퍼티는 크게 데이터 프로퍼티와 접근자 프로퍼티로 구분됨.

### (1) 데이터 프로퍼티 (Data Property)

- 일반적인 key: value 형태.
- 어트리뷰트:
- [[Value]]: 실제 값
- [[Writable]]: 값 수정 가능 여부
- [[Enumerable]]: 열거 가능 여부 (for...in, Object.keys)
- [[Configurable]]: 프로퍼티 삭제 및 어트리뷰트 수정 가능 여부

```js
const person = { name: "Lee" };
console.log(Object.getOwnPropertyDescriptor(person, "name"));
// { value: 'Lee', writable: true, enumerable: true, configurable: true }
```

### (2) 접근자 프로퍼티 (Accessor Property)

- 자체적인 값을 가지지 않고, getter/setter 함수로 다른 프로퍼티의 값을 읽거나 저장.
- 어트리뷰트:
- [[Get]]: getter 함수
- [[Set]]: setter 함수
- [[Enumerable]]
- [[Configurable]]

```js
const person = {
  firstName: "Lee",
  lastName: "Hyun",
  get fullName() {
    return `${this.firstName} ${this.lastName}`;
  },
  set fullName(name) {
    [this.firstName, this.lastName] = name.split(" ");
  },
};

console.log(person.fullName); // Lee Hyun
person.fullName = "Kim Min";
console.log(person.firstName); // Kim
```

## 객체 변경 방지 (Object.preventExtensions / seal / freeze)

### 1. Object.preventExtensions(obj)

- 의미: 객체 확장을 금지 (새 프로퍼티 추가 불가).
- 기존 프로퍼티: 읽기/쓰기/삭제 가능.
- 프로퍼티 어트리뷰트 재정의 가능.

```js
const person = { name: "Lee" };
Object.preventExtensions(person);

person.age = 20; // 추가 불가
delete person.name; // 삭제 가능
```

### 2. Object.seal(obj)

- 의미: 객체 밀봉 (추가/삭제 불가).
- 기존 프로퍼티: 읽기/쓰기 가능.
- 프로퍼티 어트리뷰트 재정의 불가 (configurable: false).

```js
const person = { name: "Lee" };
Object.seal(person);

person.age = 20; // 추가 불가
delete person.name; // 삭제 불가
person.name = "Kim"; // 값 수정 가능
```

### 3. Object.freeze(obj)

- 의미: 객체 동결 (추가/삭제/수정 모두 불가).
- 읽기만 가능.
- writable: false, configurable: false.

```js
const person = { name: "Lee" };
Object.freeze(person);

person.name = "Kim"; // 무시됨
delete person.name; // 무시됨
```

### 4. 불변 객체 (Deep Freeze)

- 위 세 메서드는 얕은(shallow) 변경 방지만 함 → 중첩 객체는 여전히 수정 가능.
- 중첩까지 불변으로 만들려면 재귀적으로 freeze 해야 함.

```js
function deepFreeze(obj) {
  Object.keys(obj).forEach((key) => {
    if (typeof obj[key] === "object" && !Object.isFrozen(obj[key])) {
      deepFreeze(obj[key]);
    }
  });
  return Object.freeze(obj);
}

const person = { name: "Lee", address: { city: "Seoul" } };
deepFreeze(person);

person.address.city = "Busan"; // 변경 불가
console.log(person.address.city); // "Seoul"
```

| 메서드                     | 프로퍼티 추가 | 프로퍼티 삭제 | 값 수정 | 어트리뷰트 재정의  |
| -------------------------- | ------------- | ------------- | ------- | ------------------ |
| `Object.preventExtensions` | ❌ 불가       | ✅ 가능       | ✅ 가능 | ✅ 가능            |
| `Object.seal`              | ❌ 불가       | ❌ 불가       | ✅ 가능 | ❌ 불가            |
| `Object.freeze`            | ❌ 불가       | ❌ 불가       | ❌ 불가 | ❌ 불가            |
| `deepFreeze` (재귀)        | ❌ 불가       | ❌ 불가       | ❌ 불가 | ❌ 불가 (중첩까지) |

## 정리

- 데이터 프로퍼티: 값과 관련된 속성 (value, writable, enumerable, configurable)
- 접근자 프로퍼티: 함수 기반 제어 (get, set, + enumerable, configurable)
- 디스크립터를 통해 이 어트리뷰트들을 확인/제어 가능.
- 객체 변경 방지 함수들을 통해서 어트리뷰트의 제어를 방지할 수도 있음.
