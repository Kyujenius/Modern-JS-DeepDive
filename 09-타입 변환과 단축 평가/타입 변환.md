# 타입 변환

## 타입 변환이란?

자바스크립트의 모든 값은 타입이 있다. 타입은 개발자의 의도에 따라 다른 타입으로 변환할 수 있다.

- 개발자가 명시적으로 타입을 변환 → 명시적 타입 변환(Explicit Coercion), 타입 캐스팅(Type Casting)

- 자바스크립트 엔진이 자동으로 변환 → 암묵적 타입 변환(Implicit Coercion), 타입 강제 변환(Type Coercion)

## 명시적 타입 변환

```js
var x = 10;

// 숫자를 문자열로 변환
var str = x.toString();
console.log(typeof str, str); // string 10

// x 변수의 값은 변하지 않음
console.log(typeof x, x); // number 10
```

## 암묵적 타입 변환

```js
var x = 10;

// 문자열 연결 연산자 사용
var str = x + "";
console.log(typeof str, str); // string 10

// x 값 자체는 변하지 않음
console.log(typeof x, x); // number 10
```

## 정리

- 명시적 타입 변환: 개발자의 의도가 코드에 명확히 드러남
- 암묵적 타입 변환: 엔진이 상황에 따라 자동 변환
- 타입 변환은 기존 값을 직접 변경하지 않고 새로운 값 생성
- 따라서 코드를 작성할 때는 예측 가능성이 중요하다.

- (10).toString() 과 같은 명시적 방식이 더 직관적이며 유지보수에도 좋다.

## 암묵적 타입 변환

자바스크립트 엔진은 표현식을 평가할 때 개발자의 의도와 상관없이 코드 문맥을 고려해 자동 변환을 수행한다.

```js
// 피연산자가 문자열이어야 하는 문맥
"10" + 2; // → "102"

// 피연산자가 숫자이어야 하는 문맥
5 * "10"; // → 50

// 피연산자가 불리언이어야 하는 문맥
!0; // → true
```

## 문자열 타입으로 변환

```js
1 + "2"; // → "12"
```

- 연산자는 피연산자 중 하나 이상이 문자열이면 문자열 연결 연산자로 동작한다.
- 따라서 숫자 1도 암묵적으로 문자열 "1"로 변환된다.

```js
// 숫자 타입
0 + ''          // → "0"
-0 + ''         // → "0"
1 + ''          // → "1"
-1 + ''         // → "-1"
NaN + ''        // → "NaN"
Infinity + ''   // → "Infinity"
-Infinity + ''  // → "-Infinity"

// 불리언 타입
true + ''       // → "true"
false + ''      // → "false"

// null 타입
null + ''       // → "null"

// undefined 타입
undefined + ''  // → "undefined"

// 심벌 타입
(Symbol()) + '' // → TypeError

// 객체 타입
{} + ''         // → "[object Object]"
Math + ''       // → "[object Math]"
[] + ''         // → ""
[10, 20] + ''   // → "10,20"
(function(){})+'' // → "function(){}"
Array + ''      // → "function Array() { [native code] }"
```

## 숫자 타입으로 변환

산술 연산자(+, -, \*, / 등)나 비교 연산자를 평가할 때 피연산자가 숫자가 아니면 암묵적으로 숫자 타입으로 변환한다

예시:

```js
1 - "1"; // → 0
1 * "10"; // → 10
1 / "one"; // → NaN
```

비교 연산자

```js
"1" > 0; // → true
```

단항 연산자

```js
// 문자열 타입
+''        // → 0
+'0'       // → 0
+'1'       // → 1
+'string'  // → NaN

// 불리언 타입
+true      // → 1
+false     // → 0

// null 타입
+null      // → 0

// undefined 타입
+undefined // → NaN

// 심벌 타입
+Symbol()  // → TypeError

// 객체 타입
+{}        // → NaN
+[]        // → 0
+[10, 20]  // → NaN
+(function(){}) // → NaN
```

### 주의사항

```js
'', [], null, false → 0
true → 1
undefined → NaN
```

## 불리언 타입으로 변환

자바스크립트는 제어문(if, for) 조건식에서 평가 결과를 불리언 타입으로 암묵 변환한다.

### Truthy vs Falsy
- Falsy 값 : false, undefined, null, 0, -0, NaN, ''(빈 문자열)
- 그 외 모든 값은 Truthy로 평가된다.

### 예제 0
```js
if ('') console.log('실행안됨');
```
### 예제 1
```js
if (1) console.log('1');   // 실행됨
if (true) console.log('2'); // 실행됨
if (0) console.log('3');    // 실행안됨
if ('str') console.log('4');// 실행됨
if (null) console.log('5'); // 실행안됨
// 결과: 1, 2, 4
```
### 예제 2
```js
if (!false)     console.log("false is falsy value");
if (!undefined) console.log("undefined is falsy value");
if (!null)      console.log("null is falsy value");
if (!0)         console.log("0 is falsy value");
if (!NaN)       console.log("NaN is falsy value");
if (!'')        console.log("'' is falsy value");
```
### Truthy/Falsy 판별 함수
```js
// Falsy 판별
function isFalsy(v) {
  return !v;
}

// Truthy 판별
function isTruthy(v) {
  return !!v;
}

// 사용 예시
isFalsy(false);      // true
isFalsy(undefined);  // true
isFalsy(null);       // true
isFalsy(0);          // true
isFalsy(NaN);        // true
isFalsy('');         // true

isTruthy(true);      // true
isTruthy('0');       // true (빈 문자열이 아니므로 truthy)
```
